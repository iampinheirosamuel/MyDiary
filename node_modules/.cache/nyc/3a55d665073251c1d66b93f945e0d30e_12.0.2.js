'use strict';var cov_1euudcjqqh=function(){var path="C:\\Users\\SamuelPinheiro\\Downloads\\Udacity\\MyDiary\\MyDiary\\src\\index.js",hash="3c3295be2b2d37ce127de28ef1f104d6608d4a41",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\SamuelPinheiro\\Downloads\\Udacity\\MyDiary\\MyDiary\\src\\index.js",statementMap:{"0":{start:{line:4,column:4},end:{line:10,column:5}},"1":{start:{line:5,column:8},end:{line:7,column:9}},"2":{start:{line:6,column:12},end:{line:6,column:29}},"3":{start:{line:7,column:9},end:{line:7,column:21}},"4":{start:{line:9,column:8},end:{line:9,column:31}},"5":{start:{line:14,column:14},end:{line:14,column:32}},"6":{start:{line:15,column:10},end:{line:15,column:19}},"7":{start:{line:16,column:17},end:{line:16,column:39}},"8":{start:{line:18,column:0},end:{line:18,column:51}},"9":{start:{line:19,column:0},end:{line:19,column:27}},"10":{start:{line:20,column:11},end:{line:20,column:35}},"11":{start:{line:23,column:13},end:{line:23,column:29}},"12":{start:{line:26,column:0},end:{line:28,column:3}},"13":{start:{line:27,column:4},end:{line:27,column:11}},"14":{start:{line:32,column:14},end:{line:32,column:25}},"15":{start:{line:33,column:0},end:{line:49,column:3}},"16":{start:{line:34,column:16},end:{line:34,column:26}},"17":{start:{line:35,column:16},end:{line:35,column:18}},"18":{start:{line:36,column:4},end:{line:48,column:5}},"19":{start:{line:37,column:8},end:{line:37,column:35}},"20":{start:{line:38,column:8},end:{line:38,column:41}},"21":{start:{line:39,column:8},end:{line:39,column:113}},"22":{start:{line:40,column:8},end:{line:40,column:27}},"23":{start:{line:41,column:8},end:{line:43,column:11}},"24":{start:{line:45,column:8},end:{line:47,column:11}},"25":{start:{line:52,column:0},end:{line:59,column:3}},"26":{start:{line:53,column:4},end:{line:55,column:5}},"27":{start:{line:54,column:8},end:{line:54,column:76}},"28":{start:{line:56,column:4},end:{line:58,column:7}},"29":{start:{line:62,column:0},end:{line:71,column:3}},"30":{start:{line:63,column:4},end:{line:67,column:5}},"31":{start:{line:64,column:8},end:{line:66,column:11}},"32":{start:{line:68,column:4},end:{line:70,column:7}},"33":{start:{line:74,column:0},end:{line:81,column:3}},"34":{start:{line:75,column:20},end:{line:75,column:79}},"35":{start:{line:76,column:4},end:{line:76,column:35}},"36":{start:{line:77,column:4},end:{line:77,column:41}},"37":{start:{line:78,column:4},end:{line:80,column:7}},"38":{start:{line:84,column:0},end:{line:84,column:27}},"39":{start:{line:87,column:0},end:{line:87,column:17}},"40":{start:{line:88,column:0},end:{line:88,column:42}}},fnMap:{"0":{name:"_toConsumableArray",decl:{start:{line:3,column:9},end:{line:3,column:27}},loc:{start:{line:3,column:33},end:{line:11,column:1}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:26,column:11},end:{line:26,column:12}},loc:{start:{line:26,column:37},end:{line:28,column:1}},line:26},"2":{name:"(anonymous_2)",decl:{start:{line:33,column:30},end:{line:33,column:31}},loc:{start:{line:33,column:50},end:{line:49,column:1}},line:33},"3":{name:"(anonymous_3)",decl:{start:{line:52,column:29},end:{line:52,column:30}},loc:{start:{line:52,column:49},end:{line:59,column:1}},line:52},"4":{name:"(anonymous_4)",decl:{start:{line:62,column:39},end:{line:62,column:40}},loc:{start:{line:62,column:59},end:{line:71,column:1}},line:62},"5":{name:"(anonymous_5)",decl:{start:{line:74,column:39},end:{line:74,column:40}},loc:{start:{line:74,column:59},end:{line:81,column:1}},line:74}},branchMap:{"0":{loc:{start:{line:4,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:4,column:4},end:{line:10,column:5}},{start:{line:4,column:4},end:{line:10,column:5}}],line:4},"1":{loc:{start:{line:20,column:11},end:{line:20,column:35}},type:"binary-expr",locations:[{start:{line:20,column:11},end:{line:20,column:27}},{start:{line:20,column:31},end:{line:20,column:35}}],line:20},"2":{loc:{start:{line:36,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:48,column:5}},{start:{line:36,column:4},end:{line:48,column:5}}],line:36},"3":{loc:{start:{line:36,column:8},end:{line:36,column:81}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:41}},{start:{line:36,column:45},end:{line:36,column:81}}],line:36},"4":{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:53,column:4},end:{line:55,column:5}}],line:53},"5":{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:63,column:4},end:{line:67,column:5}}],line:63}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},_coverageSchema:"d34fc3e6b8297bcde183f5492bcb8fcb36775295"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();function _toConsumableArray(arr){cov_1euudcjqqh.f[0]++;cov_1euudcjqqh.s[0]++;if(Array.isArray(arr)){cov_1euudcjqqh.b[0][0]++;cov_1euudcjqqh.s[1]++;for(var i=0,arr2=Array(arr.length);i<arr.length;i++){cov_1euudcjqqh.s[2]++;arr2[i]=arr[i];}cov_1euudcjqqh.s[3]++;return arr2;}else{cov_1euudcjqqh.b[0][1]++;cov_1euudcjqqh.s[4]++;return Array.from(arr);}}// calls modules
var express=(cov_1euudcjqqh.s[5]++,require('express'));var app=(cov_1euudcjqqh.s[6]++,express());var bodyParser=(cov_1euudcjqqh.s[7]++,require('body-parser'));// configure app to use body-parser
cov_1euudcjqqh.s[8]++;app.use(bodyParser.urlencoded({extended:true}));cov_1euudcjqqh.s[9]++;app.use(bodyParser.json());// parses json
var port=(cov_1euudcjqqh.s[10]++,(cov_1euudcjqqh.b[1][0]++,process.env.PORT)||(cov_1euudcjqqh.b[1][1]++,8080));// set port
// Routes for API
var router=(cov_1euudcjqqh.s[11]++,express.Router());// middleware to use for all requests
cov_1euudcjqqh.s[12]++;router.use(function(req,res,next){cov_1euudcjqqh.f[1]++;cov_1euudcjqqh.s[13]++;next();});// Set Up Routes
// create an entry for MyDiary
var entries=(cov_1euudcjqqh.s[14]++,new Set([]));cov_1euudcjqqh.s[15]++;router.route('/entries').post(function(req,res){cov_1euudcjqqh.f[2]++;var today=(cov_1euudcjqqh.s[16]++,new Date());var entry=(cov_1euudcjqqh.s[17]++,{});cov_1euudcjqqh.s[18]++;if((cov_1euudcjqqh.b[3][0]++,typeof req.body.name==='string')&&(cov_1euudcjqqh.b[3][1]++,typeof req.body.content==='string')){cov_1euudcjqqh.b[2][0]++;cov_1euudcjqqh.s[19]++;entry.name=req.body.name;cov_1euudcjqqh.s[20]++;entry.content=req.body.content;cov_1euudcjqqh.s[21]++;entry.created_at=today.toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});cov_1euudcjqqh.s[22]++;entries.add(entry);cov_1euudcjqqh.s[23]++;res.status(201).json({entries:'Entry added successfully'});}else{cov_1euudcjqqh.b[2][1]++;cov_1euudcjqqh.s[24]++;return res.status(400).send({Response:'Bad Request'});// 400 Bad Request
}});// get all entries for MyDiary
cov_1euudcjqqh.s[25]++;router.route('/entries').get(function(req,res){cov_1euudcjqqh.f[3]++;cov_1euudcjqqh.s[26]++;if(entries.size!==0){cov_1euudcjqqh.b[4][0]++;cov_1euudcjqqh.s[27]++;return res.status(200).json([].concat(_toConsumableArray(entries)));}else{cov_1euudcjqqh.b[4][1]++;}cov_1euudcjqqh.s[28]++;return res.status(400).send({Response:'Bad Request'});});// get an entry from MyDiary
cov_1euudcjqqh.s[29]++;router.route('/entries/:entry_id').get(function(req,res){cov_1euudcjqqh.f[4]++;cov_1euudcjqqh.s[30]++;if([].concat(_toConsumableArray(entries))[req.params.entry_id]){cov_1euudcjqqh.b[5][0]++;cov_1euudcjqqh.s[31]++;return res.status(200).json({entry:[].concat(_toConsumableArray(entries))[req.params.entry_id]});}else{cov_1euudcjqqh.b[5][1]++;}cov_1euudcjqqh.s[32]++;res.status(404).json({Response:'Not found'});});// modify an entry from MyDiary
cov_1euudcjqqh.s[33]++;router.route('/entries/:entry_id').put(function(req,res){cov_1euudcjqqh.f[5]++;var editEntry=(cov_1euudcjqqh.s[34]++,[].concat(_toConsumableArray(entries))[req.params.entry_id]);cov_1euudcjqqh.s[35]++;editEntry.name=req.body.name;cov_1euudcjqqh.s[36]++;editEntry.content=req.body.content;cov_1euudcjqqh.s[37]++;res.json({entry:editEntry});});// Register Routes
cov_1euudcjqqh.s[38]++;app.use('/api/v1',router);// Start the Server
cov_1euudcjqqh.s[39]++;app.listen(port);cov_1euudcjqqh.s[40]++;console.log('server started at: '+port);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIl90b0NvbnN1bWFibGVBcnJheSIsImFyciIsIkFycmF5IiwiaXNBcnJheSIsImkiLCJhcnIyIiwibGVuZ3RoIiwiZnJvbSIsImV4cHJlc3MiLCJyZXF1aXJlIiwiYXBwIiwiYm9keVBhcnNlciIsInVzZSIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsImpzb24iLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZW50cmllcyIsIlNldCIsInJvdXRlIiwicG9zdCIsInRvZGF5IiwiRGF0ZSIsImVudHJ5IiwiYm9keSIsIm5hbWUiLCJjb250ZW50IiwiY3JlYXRlZF9hdCIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInllYXIiLCJtb250aCIsImRheSIsImFkZCIsInN0YXR1cyIsInNlbmQiLCJSZXNwb25zZSIsImdldCIsInNpemUiLCJjb25jYXQiLCJwYXJhbXMiLCJlbnRyeV9pZCIsInB1dCIsImVkaXRFbnRyeSIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLFNBQVNBLGtCQUFULENBQTRCQyxHQUE1QixFQUFpQztBQUFFLFFBQUlDLE1BQU1DLE9BQU4sQ0FBY0YsR0FBZCxDQUFKLEVBQXdCO0FBQUUsYUFBSyxJQUFJRyxJQUFJLENBQVIsRUFBV0MsT0FBT0gsTUFBTUQsSUFBSUssTUFBVixDQUF2QixFQUEwQ0YsSUFBSUgsSUFBSUssTUFBbEQsRUFBMERGLEdBQTFELEVBQStEO0FBQUVDLGlCQUFLRCxDQUFMLElBQVVILElBQUlHLENBQUosQ0FBVjtBQUFtQixTQUFDLE9BQU9DLElBQVA7QUFBYyxLQUE3SCxNQUFtSTtBQUFFLGVBQU9ILE1BQU1LLElBQU4sQ0FBV04sR0FBWCxDQUFQO0FBQXlCO0FBQUU7O0FBRW5NO0FBQ0EsSUFBSU8sVUFBVUMsUUFBUSxTQUFSLENBQWQ7QUFDQSxJQUFJQyxNQUFNRixT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QUdILENBVEQ7O0FBV0E7QUFDQXZCLE9BQU9PLEtBQVAsQ0FBYSxvQkFBYixFQUFtQ3NCLEdBQW5DLENBQXVDLFVBQVUzQixHQUFWLEVBQWVDLEdBQWYsRUFBb0I7QUFDdkQsUUFBSTJCLFlBQVksR0FBR0osTUFBSCxDQUFVOUMsbUJBQW1CeUIsT0FBbkIsQ0FBVixFQUF1Q0gsSUFBSXlCLE1BQUosQ0FBV0MsUUFBbEQsQ0FBaEI7QUFDQUUsY0FBVWpCLElBQVYsR0FBaUJYLElBQUlVLElBQUosQ0FBU0MsSUFBMUI7QUFDQWlCLGNBQVVoQixPQUFWLEdBQW9CWixJQUFJVSxJQUFKLENBQVNFLE9BQTdCO0FBQ0FYLFFBQUlSLElBQUosQ0FBUztBQUNMZ0IsZUFBT21CO0FBREYsS0FBVDtBQUdILENBUEQ7O0FBU0E7QUFDQXhDLElBQUlFLEdBQUosQ0FBUSxTQUFSLEVBQW1CUSxNQUFuQjs7QUFFQTtBQUNBVixJQUFJeUMsTUFBSixDQUFXbkMsSUFBWDtBQUNBb0MsUUFBUUMsR0FBUixDQUFZLHdCQUF3QnJDLElBQXBDIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6IkM6L1VzZXJzL1NhbXVlbFBpbmhlaXJvL0Rvd25sb2Fkcy9VZGFjaXR5L015RGlhcnkvTXlEaWFyeS9zcmMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG4vLyBjYWxscyBtb2R1bGVzXG52YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbnZhciBhcHAgPSBleHByZXNzKCk7XG52YXIgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XG4vLyBjb25maWd1cmUgYXBwIHRvIHVzZSBib2R5LXBhcnNlclxuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTsgLy8gcGFyc2VzIGpzb25cbnZhciBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA4MDgwOyAvLyBzZXQgcG9ydFxuXG4vLyBSb3V0ZXMgZm9yIEFQSVxudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8vIG1pZGRsZXdhcmUgdG8gdXNlIGZvciBhbGwgcmVxdWVzdHNcbnJvdXRlci51c2UoZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgbmV4dCgpO1xufSk7XG5cbi8vIFNldCBVcCBSb3V0ZXNcbi8vIGNyZWF0ZSBhbiBlbnRyeSBmb3IgTXlEaWFyeVxudmFyIGVudHJpZXMgPSBuZXcgU2V0KFtdKTtcbnJvdXRlci5yb3V0ZSgnL2VudHJpZXMnKS5wb3N0KGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIGVudHJ5ID0ge307XG4gICAgaWYgKHR5cGVvZiByZXEuYm9keS5uYW1lID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgcmVxLmJvZHkuY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZW50cnkubmFtZSA9IHJlcS5ib2R5Lm5hbWU7XG4gICAgICAgIGVudHJ5LmNvbnRlbnQgPSByZXEuYm9keS5jb250ZW50O1xuICAgICAgICBlbnRyeS5jcmVhdGVkX2F0ID0gdG9kYXkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgeWVhcjogJ251bWVyaWMnLCBtb250aDogJ2xvbmcnLCBkYXk6ICdudW1lcmljJyB9KTtcbiAgICAgICAgZW50cmllcy5hZGQoZW50cnkpO1xuICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgICAgICBlbnRyaWVzOiAnRW50cnkgYWRkZWQgc3VjY2Vzc2Z1bGx5J1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoe1xuICAgICAgICAgICAgUmVzcG9uc2U6ICdCYWQgUmVxdWVzdCdcbiAgICAgICAgfSk7IC8vIDQwMCBCYWQgUmVxdWVzdFxuICAgIH1cbn0pO1xuXG4vLyBnZXQgYWxsIGVudHJpZXMgZm9yIE15RGlhcnlcbnJvdXRlci5yb3V0ZSgnL2VudHJpZXMnKS5nZXQoZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gICAgaWYgKGVudHJpZXMuc2l6ZSAhPT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShlbnRyaWVzKSkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoe1xuICAgICAgICBSZXNwb25zZTogJ0JhZCBSZXF1ZXN0J1xuICAgIH0pO1xufSk7XG5cbi8vIGdldCBhbiBlbnRyeSBmcm9tIE15RGlhcnlcbnJvdXRlci5yb3V0ZSgnL2VudHJpZXMvOmVudHJ5X2lkJykuZ2V0KGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgIGlmIChbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGVudHJpZXMpKVtyZXEucGFyYW1zLmVudHJ5X2lkXSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgZW50cnk6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZW50cmllcykpW3JlcS5wYXJhbXMuZW50cnlfaWRdXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgIFJlc3BvbnNlOiAnTm90IGZvdW5kJ1xuICAgIH0pO1xufSk7XG5cbi8vIG1vZGlmeSBhbiBlbnRyeSBmcm9tIE15RGlhcnlcbnJvdXRlci5yb3V0ZSgnL2VudHJpZXMvOmVudHJ5X2lkJykucHV0KGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgIHZhciBlZGl0RW50cnkgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGVudHJpZXMpKVtyZXEucGFyYW1zLmVudHJ5X2lkXTtcbiAgICBlZGl0RW50cnkubmFtZSA9IHJlcS5ib2R5Lm5hbWU7XG4gICAgZWRpdEVudHJ5LmNvbnRlbnQgPSByZXEuYm9keS5jb250ZW50O1xuICAgIHJlcy5qc29uKHtcbiAgICAgICAgZW50cnk6IGVkaXRFbnRyeVxuICAgIH0pO1xufSk7XG5cbi8vIFJlZ2lzdGVyIFJvdXRlc1xuYXBwLnVzZSgnL2FwaS92MScsIHJvdXRlcik7XG5cbi8vIFN0YXJ0IHRoZSBTZXJ2ZXJcbmFwcC5saXN0ZW4ocG9ydCk7XG5jb25zb2xlLmxvZygnc2VydmVyIHN0YXJ0ZWQgYXQ6ICcgKyBwb3J0KTsiXX0=